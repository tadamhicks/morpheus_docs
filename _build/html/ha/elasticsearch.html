

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Elasticsearch &mdash; morpheus-docs 2.12.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="morpheus-docs 2.12.2 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/provisioning.html">Provisioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logs/logging.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backups/backups.html">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration_guides/integration_guides.html">Integration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faqs.html">FAQ’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ha_setup.html">Morpheus High Availability Configuration</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">morpheus-docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Elasticsearch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/ha/elasticsearch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="elasticsearch">
<h1>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permalink to this headline">¶</a></h1>
<p>Install 3 node Elasticsearch Cluster on Centos 7</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This is a sample configuraiton only. Customer configuraitons and requirements will vary.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Three Existing Cenots 7+ nodes accessible to the Morpheus Appliance</p>
</li>
<li><p class="first">Install Java on each node</p>
<p>You can install the latest OpenJDK with the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo yum install java-1.8.0-openjdk.x86_64
</pre></div>
</div>
<p>To verify your JRE is installed and can be used, run the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>java -version
</pre></div>
</div>
<p>The result should look like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Output of java -version
openjdk version <span class="s2">&quot;1.8.0_65&quot;</span>
OpenJDK Runtime Environment <span class="o">(</span>build <span class="m">1</span>.8.0_65-b17<span class="o">)</span>
OpenJDK <span class="m">64</span>-Bit Server VM <span class="o">(</span>build <span class="m">25</span>.65-b01, mixed mode<span class="o">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Download and Install Elasticsearch</p>
<p>Elasticsearch can be downloaded directly from elastic.co in zip, tar.gz, deb, or rpm packages. For CentOS, it’s best to use the native rpm package which will install everything you need to run Elasticsearch. Download it in a directory of your choosing with the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.3.noarch.rpm
</pre></div>
</div>
<p>Then install it in the usual CentOS way with the rpm command like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo rpm -ivh elasticsearch-1.7.3.noarch.rpm
</pre></div>
</div>
<p>This results in Elasticsearch being installed in /usr/share/elasticsearch/ with its configuration files placed in /etc/elasticsearch and its init script added in /etc/init.d/elasticsearch.</p>
<p>To make sure Elasticsearch starts and stops automatically, add its init script to the default runlevels with the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo systemctl <span class="nb">enable</span> elasticsearch.service
</pre></div>
</div>
</li>
<li><p class="first">Configuring Elastic</p>
<p>Now that Elasticsearch and its Java dependencies have been installed, it is time to configure Elasticsearch.</p>
<p>The Elasticsearch configuration files are in the /etc/elasticsearch directory. There are two files:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo vi /etc/elasticsearch/elasticsearch.yml
</pre></div>
</div>
<dl class="docutils">
<dt>elasticsearch.yml</dt>
<dd><p class="first last">Configures the Elasticsearch server settings. This is where all options, except those for logging, are stored, which is why we are mostly interested in this file.</p>
</dd>
<dt>logging.yml</dt>
<dd><p class="first last">Provides configuration for logging. In the beginning, you don’t have to edit this file. You can leave all default logging options. You can find the resulting logs in /var/log/elasticsearch by default.</p>
</dd>
</dl>
<p>The first variables to customize on any Elasticsearch server are node.name and cluster.name in elasticsearch.yml. As their names suggest, node.name specifies the name of the server (node) and the cluster to which the latter is associated.</p>
<p>Node 1</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cluster.name: morpheusha1
node.name: <span class="s2">&quot;morpheuses1&quot;</span>
discovery.zen.ping.unicast.hosts: <span class="o">[</span><span class="s2">&quot;10.30.20.91&quot;</span>,<span class="s2">&quot;10.30.20.149&quot;</span>,<span class="s2">&quot;10.30.20.165&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>Node 2</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cluster.name: morpheusha1
node.name: <span class="s2">&quot;morpheuses2&quot;</span>
discovery.zen.ping.unicast.hosts: <span class="o">[</span><span class="s2">&quot;10.30.20.91&quot;</span>,<span class="s2">&quot;10.30.20.149&quot;</span>,<span class="s2">&quot;10.30.20.165&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>Node 3</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cluster.name: morpheusha1
node.name: <span class="s2">&quot;morpheuses3&quot;</span>
discovery.zen.ping.unicast.hosts: <span class="o">[</span><span class="s2">&quot;10.30.20.91&quot;</span>,<span class="s2">&quot;10.30.20.149&quot;</span>,<span class="s2">&quot;10.30.20.165&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>For the above changes to take effect, you will have to restart Elasticsearch with the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo service elasticsearch restart
</pre></div>
</div>
</li>
<li><p class="first">Testing</p>
<p>By now, Elasticsearch should be running on port 9200. You can test it with curl, the command line client-side URL transfers tool and a simple GET request like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>~<span class="o">]</span>$ sudo curl -X GET <span class="s1">&#39;http://10.30.20.149:9200&#39;</span>
      <span class="o">{</span>
        <span class="s2">&quot;status&quot;</span> : <span class="m">200</span>,
        <span class="s2">&quot;name&quot;</span> : <span class="s2">&quot;morpheuses1&quot;</span>,
        <span class="s2">&quot;cluster_name&quot;</span> : <span class="s2">&quot;morpheusha1&quot;</span>,
        <span class="s2">&quot;version&quot;</span> : <span class="o">{</span>
          <span class="s2">&quot;number&quot;</span> : <span class="s2">&quot;1.7.3&quot;</span>,
          <span class="s2">&quot;build_hash&quot;</span> : <span class="s2">&quot;05d4530971ef0ea46d0f4fa6ee64dbc8df659682&quot;</span>,
          <span class="s2">&quot;build_timestamp&quot;</span> : <span class="s2">&quot;2015-10-15T09:14:17Z&quot;</span>,
          <span class="s2">&quot;build_snapshot&quot;</span> : false,
          <span class="s2">&quot;lucene_version&quot;</span> : <span class="s2">&quot;4.10.4&quot;</span>
        <span class="o">}</span>,
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Morpheus Data.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.12.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>