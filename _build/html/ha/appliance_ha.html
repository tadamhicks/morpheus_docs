

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Application Tier &mdash; morpheus-docs 2.12.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="morpheus-docs 2.12.2 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/provisioning.html">Provisioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logs/logging.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backups/backups.html">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration_guides/integration_guides.html">Integration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faqs.html">FAQ’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ha_setup.html">Morpheus High Availability Configuration</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">morpheus-docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Application Tier</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/ha/appliance_ha.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="application-tier">
<h1>Application Tier<a class="headerlink" href="#application-tier" title="Permalink to this headline">¶</a></h1>
<p>{morpheus} configuration is controlled by a configuration file located
at /etc/morpheus/morpheus.rb. This file is read when you run
morpheus-ctl reconfigure after installing the appliance package. Each
section is tied to a deployment tier: database is mysql, message queue
is rabbitmq, serach index is elasticsearch. There are no entries for the
web and application tiers since those are part of the core application
server where the configuration file resides.</p>
<ol class="arabic simple">
<li>Download and install the Morpheus Applaince Package</li>
<li>Next we must install the package onto the machine and configure the morpheus services:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo sudo rpm -i morpheus-appliance-x.x.x-1.x86<span class="se">\_</span><span class="m">64</span>.rpm
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">After installing and prior to reconfiguring, edit the morpheus.rb file</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo vi /etc/morpheus/morpheus.rb
</pre></div>
</div>
<p>Change the values to match your configured services:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The values below are examples. Update hsots, ports, usernames and password with your specificaitons. Only include entries for services you wish to externalize.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mysql<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span>
mysql<span class="o">[</span><span class="s1">&#39;host&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;10.30.20.139&#39;</span> <span class="o">=</span>&gt; <span class="m">3306</span>,  <span class="s1">&#39;10.30.20.153&#39;</span> <span class="o">=</span>&gt; <span class="m">3306</span>,  <span class="s1">&#39;10.30.20.196&#39;</span> <span class="o">=</span>&gt; <span class="m">3306</span><span class="o">}</span>
mysql<span class="o">[</span><span class="s1">&#39;morpheus_db&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheusdb&#39;</span>
mysql<span class="o">[</span><span class="s1">&#39;morpheus_db_user&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheusadmin&#39;</span>
mysql<span class="o">[</span><span class="s1">&#39;morpheus_password&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheus4admin!&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;vhost&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morph&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;queue_user&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;lbuser&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;queue_user_password&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheus4admin&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;host&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheus-ha-mq-lb-1.den.morpheusdata.com&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;port&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;5672&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;stomp_port&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;61613&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;heartbeat&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="m">50</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;cluster&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheusha1&#39;</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;es_hosts&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;10.30.20.91&#39;</span> <span class="o">=</span>&gt; <span class="m">9300</span>, <span class="s1">&#39;10.30.20.149&#39;</span> <span class="o">=</span>&gt; <span class="m">9300</span>, <span class="s1">&#39;10.30.20.165&#39;</span> <span class="o">=</span>&gt; <span class="m">9300</span><span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Recofigure Morpheus</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo morpheus-ctl reconfigure
</pre></div>
</div>
</li>
</ol>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Morpheus Data.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.12.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>